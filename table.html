<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>


<body>

        <div class="container" id="main"></div>
        <h1>This is your inbox.</h1>
        <table>
            <tr>
                <th>Date</th>
                <th>Sender</th>
                <th>Subject</th>
                <th>Body</th>
            </tr>
            <tbody id="emailContainer">                
            </tbody>    
        </table>
    
    <!-- This is the template -->
<script id="emailTemplate" type="text/x-jquery-tmpl">
    <tr>
                    <td> ${date} </td>
                    <td> ${sender} </td>
                    <td> ${subject} </td>
                    <td> ${body} </td>
                </tr>
</script>

<script>
var subject = ['Call Your Mother', 'Cheap Online Meds', 'Change Your Life Today', 'Sppoky Stories', 'Meet Singles In Your Area', 'Have You Heard?', 'Yo', 'RE: Looking for a three legged cat', 'Get Rich Quick!', 'FW: Token Chain Email'];
var sender = ['Mary Monster', 'Dave Danger', 'Spam Master', 'Spike Spurner', 'Ray Ranger', 'Catherine Chaos', 'Van Pire', 'Andy Argye', 'Rick Roger', 'Sue Mee'];
var body = ['Message 1','Message 2','Message 3','Message 4','Message 5','Message 6','Message 7','Message 8','Message 9','Message 10'];

</script>

<script>
function loadGeeMails(){
    for (var i = 0; i < 10; i++){
        var message = generateMessage();
        window.geemails.push(message);
    }
}

function generateMessage(date){
    var message = {};
    message.date = (date || getRandomDate()).toDateString();
    message.subject = getRandomElement(subject);
    message.sender = getRandomElement(sender);
    message.body = getRandomElement(body);
    return message;
}

function getRandomElement(arr){
    return arr[Math.floor(Math.random() * arr.length)];
}

function getNewMessage(){
    var now = new Date();
    return generateMessage(now);
}

function getRandomDate(){
    var year = 2013;
    var month = Math.floor(Math.random() * 12) + 1;
    var day = Math.floor(Math.random() * 30) + 1;
    var hours = Math.floor(Math.random() * 12) + 1;
    var minutes = Math.floor(Math.random() * 59) + 1;
    return new Date(year, month, day, hours, minutes);
}

$("document").ready(function(){
 window.geemails = [];
    loadGeeMails(); console.log(window.geemails);
      $("#emailTemplate").tmpl(window.geemails).appendTo("#emailContainer");
});

</script>
