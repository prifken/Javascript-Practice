<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!--Begin template scripts-->
    <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="assets/img/favicon.png">
        
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Order Request Form</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    
    <link href="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=41" rel="stylesheet" /><!--bootstrap.css-->
    <link href="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=42" rel="stylesheet" />   
    <link href="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=43" rel="stylesheet" /> 
    
    <!--     Font Awesome     -->
    <link href="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=50" rel="stylesheet"> <!--font-awesome.css-->
    <link href='https://fonts.googleapis.com/css?family=Grand+Hotel' rel='stylesheet' type='text/css'>
    <!--End template scripts-->
    <!--Date Picker-->
    <link href="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=54" rel="stylesheet" /> <!--bootstrap-datepicker-standalone.css-->
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet" />
<style>
.form-control::-webkit-input-placeholder { color: gray; } /* Over-ride default placeholder color */
</style>
</head>

<body>
    <div class="main">
        <div class="container">
        
          <div class="alert alert-danger text-center" id="banner">

             <div class="container">
                 <b>Warning</b> Missing a Required Field
            </div>
          </div><script>$('#banner').hide();</script>
        <h2>Robotics - Team Project Manager: Order Requests</h2>
            <form name=qdbform method=POST onsubmit='return validateForm(this);' encType='multipart/form-data' action=https://team.quickbase.com/db/bk8p6344r?act=API_AddRecord&apptoken=cwfcy7gdzqrsyncqbi2bn4u4kr>
                <input type=hidden name=fform value=1>
                    <div class="row">
                        <!--<div class="col-md-4">.col-md-4</div>-->
                            <div class="form-group col-md-4"><input placeholder="Description" type=text name=_fid_6 class="form-control">
                            </div>
                            <div class="form-group col-md-4 has-error has-feedback"><input placeholder="Link to Parts Online" class="form-control" type=text name=_fid_12 ></div>
                            <div class="form-group col-md-4"><input placeholder="Part Number" class="form-control" type=text name=_fid_7 ></div>
                       
                    </div>
                    <div class="row">
                    		<div class="col-md-4">
                           		 <div class="form-group" placeholder="test">
                           		     <select name=_fid_15 class="form-control">
                           		         <option value="" disabled selected>Select Priority</option>
                           		         <option>Urgent</option>
                           		         <option>Medium</option>
                           		         <option>Low</option>
                           		     </select>
                           		 </div>
                        	</div>
                            <div class="col-md-4 form-group has-error has-feedback">
                            	<!--<div><font color=red size=+1>*</font>Quantity Requested</div>-->
                            	<input type=number min=1 step="1" placeholder="Quantity Requested" name=_fid_8 class="form-control">
                       		</div>
                        	<div class="col-md-4">
                            	<div class="form-group">
                        			   <div class="input-group date" data-provide="datepicker">
                        			   	<input type=text name=_fid_14 class="form-control" placeholder="Date Requested By">
   											              <span class="the-icons input-group-addon">
        								              		<span class="glyphicon glyphicon-calendar"></span>
    										              </span>
									               </div>
                              </div>
							            </div>
					          </div>
					          <div class="row">
                        	<div class="col-md-4 form-group">
                            		<select class="form-control" id=appendme onchange="changefunction($('#appendme').val())">
                            			<option value="" disabled selected>Select Vendor</option>
                            		</select>
                            		<input type=hidden name=_fid_16 id=hiddenitem> <!--This sends related vendor ID to QB -->
                          </div>
                    		  <div class="col-md-4 form-group">
                					<!--<input type=hidden name=rdr value='http://google.com'>-->
                					      <input type=submit class="btn btn-primary" value="Submit Order Form" type="form-control">
                			    </div>
                	  </div>
            </form>
        <br />
        

        	
            <!--
                <br>
                <button type="button" class="btn btn-info">This is a button</button>
                <button type="button" class="btn btn-default btn-tooltip" data-toggle="tooltip" data-placement="top" title="" data-original-title="Tooltip on top">Tooltip on top</button>

                 <button type="button" class="btn btn-default btn-tooltip" data-toggle="tooltip" data-placement="top" title="Tooltip on top" data-original-title="ToolTipOnTop" id="mybutton">Button with Tooltip</button>
            -->
           
        </div>    
    </div>
    

</body>

    
    <script src="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=44" type="text/javascript"></script><!-- jquery-ui-1.10.4.custom.min.js--> 
    <script src="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=45" type="text/javascript"></script> <!--came with Get Sh*t done --> 
    <script src="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=46"></script> <!--came with Get Sh*t done --> 
    <script src="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=47"></script> <!--came with Get Sh*t done --> 
    <script src="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=48"></script> <!--came with Get Sh*t done --> 
    <script src="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=49"></script> <!--came with Get Sh*t done --> 
    <script src="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=51"></script> <!--came with Get Sh*t done --> 
    <!--Date Picker--> 
	<script src="https://team.quickbase.com/db/bk7sy9jda?a=pagePreview&pageID=53"></script>
	
    <!--Prototype Definitions-->
	<script>
		 function vendors()
		  		{
		this.vendorName="Name";
		this.recordID=0;
				}	
	</script>
	<!--End Prototype Definitions-->

		<script>
		//Query Vendors Table and Create Vendors Array
		 var url = "https://team.quickbase.com";     // Remember to put in YOUR baseURL https://team.quickbase.com/db/bk7szc9ck
		  url    += "/db/";
		  url    += "bk7szc9ck";                                   // Remember to put in YOUR tableDBID
		  url    += "?a=API_DoQuery";
		
		  var request = "<qdbapi>";
		  request    += "<usertoken>b287yg_uyp_dsagzw8b755gx7bvr8hfmdp3fu53</usertoken>";            // Remember to put in YOUR appToken
		  request    += "</qdbapi>";
		
		var vendorArray=[]; 
		
		$.ajax({
		type: "POST",
		contentType: "text/xml",
		async: false,
		url: url,
		dataType: "xml",
		processData: false,
		data: request,
					    success: function (response) {
		
					     var xml = $(response); //Convert response to XML Code
					     if (xml.find('qdbapi').find('errcode').text() == "0") {
						
							var cast = 0; 
					//Looping Through Response Begins Below
											  	 xml.find('qdbapi').find('record').each(function(index){	
											  	 	var x = new vendors("Test",0); 
											  	 	x.vendorName=$(this).find("vendor_name").text();
											  	 	x.recordID=$(this).find("record_id_").text();
												    //console.log("Vendor Name = " + $(this).find("vendor_name").text());
											    	//console.log("Record ID = " + $(this).find("record_id_").text());
											    	vendorArray.push(x);
											    	//console.log(vendorArray);
													//console.log("\n\n");
											 	});//End XML Loop
						console.log(vendorArray);
					 	}
					    else 
					    {
					     console.log("Quickbase returned an error.");
					     console.log(response);
					   } 
					 },
		error: function (response)
			{
			console.log("Quickbase returned an error.");
			console.log(response);
			}
		});
		</script>
    <!-- Begin Quickbase Form Scripts--> 
    <script lang="javascript">
   
    function CheckForOther (item, origlen)
        {
        var sitem = item.options[item.selectedIndex];
    
        if (item.selectedIndex == (item.length - 1))
            {
            var val = prompt ("ADD A NEW CHOICE:", "");
    
            if (val == null)
                item.selectedIndex = 0;
            else    
                {
                var slen = item.length;
    
                if (slen == origlen+1){
                    item.options[slen] = new Option (sitem.text, sitem.value);
                            }
                
                item.options[item.length-2].text = val;
                item.options[item.length-2].value = val;
                item.selectedIndex = item.length-2;
                }
            }
        }
    </script>
    <script lang=javascript>
        function validateForm(theForm)
          {
            if(theForm._fid_12.value == "")
                {
                  theForm._fid_12.focus();
                  theForm.preventDefault();
                  $(document).ready(function(){
                     $('#banner').fadeIn(500).delay(1500).fadeOut(500);

                   });
                  return (false);
                }
            if(theForm._fid_8.value == "")
                {
                  theForm._fid_8.focus();
                  theForm.preventDefault();
                  $(document).ready(function(){
                     $('#banner').fadeIn(500).delay(1500).fadeOut(500);
                   });
                  return (false);
                }
          }
    </script>
    <!-- End Quickbase Form Scripts--> 

    <script>
	
	$(function(){
     
         for (i = 0; i < vendorArray.length; i++)
            {
            	//console.log("success: "+ vendorArray[i].vendor_name);
                $("#appendme").append('<option>'+vendorArray[i].vendorName+'</option>');
            }
          $('#banner').hide();
          //alert("ran");
           
          $('#form').submit(function (evt) {
          evt.preventDefault();
          window.history.back();
});
	
	});
	</script>
	<script type="text/javascript">

	function changefunction(val){
		//alert(val);
		for (i = 0; i < vendorArray.length; i++)
            {
            	//console.log("success: "+ vendorArray[i].vendor_name);
                console.log(val+" "+vendorArray[i].vendorName);
                if(val==vendorArray[i].vendorName){
                	//alert(vendorArray[i].recordID);
                	$('#hiddenitem').val(vendorArray[i].recordID);
                }
            }
	};

	</script>
</html>